0# Cosa è?
L'acronimo sta per Advanced RISC Machine
dal tipo di architettura ARM, prende il nome l'azienda che ne detiene le licenze
![[Pasted image 20240415113048.png|480]]
## Varie versioni della architettura ARM
Quelle che vedremo di più sono le v7
e si dividono in 3 tipologie:
- Cortex-A: dispositivi ad elaborazione avanzata tipo per i telefoni
- Cortex-R: per applicazioni in tempo reale tipo roba per automobili
- Cortex-M: per processori a basso consumo e che siano veloci
![[Pasted image 20240415113849.png]]
###  Instruction set ARM
L'instruction set è una serie di istruzioni che occupano determinati bit di lunghezza fissa e che esegue il processore di tipo ARM, l'architettura ARM ne prevede 3 :
- 32 bit istruzioni ARM: uso di istruzioni di tipo LOAD/STORE dove ogni istruzione può essere di tipo condizionale modificando lo stato di una flag
- 16 bit Thumb: è una versione compressa delle istruzioni ARM ma non ha tutte le sue funzionalità, ad esempio non è condizionale tranne la funzione Branch(salto) dove in base a una condizione avviene il salto da un indirizzo di memoria all'altro
- 8 bit Jazelle: permette l'esecuzione di bytecode Java sulla CPU senza convertirlo in istruzioni ARM
>[!info]- cosa è il bytecode
>Il bytecode è un tipo di codice sorgente intermedio più astratto rispetto al codice macchina 
>nativo eseguito direttamente da un processore. Mentre il codice macchina è specifico per 
>un'architettura hardware particolare, il bytecode è progettato per essere eseguito su una 
>macchina virtuale (VM) anziché direttamente su un hardware fisico.

>[!info]- cosa è il registro di stato?
>il registro di stato è quella memoria che salva tutti gli stati delle flag(tipo 0 o 1) che vengono usati per svolgere problemi di tipo condizionale
## Le sue caratteristiche
1. Ogni istruzione può essere skippata o meno  in base a delle condizioni che si verificano dalle flag(es: se due valori sono uguali, oppure un risultato di una operazione ha stato negativo)
2. Architettura LOAD/STORE, ovvero una architettura che ha le operazioni di caricamento dalla memoria e di salvataggio sulla memoria separate.
3. Non è possibile fare operazioni di shift elementari ma solo operazioni aritmetiche logiche che possono portare allo stesso risultato anche con solo una istruzione
4. Non esiste la divisione matematica, deve farla un coprocessore 
5. Incremento o Decremento degli indirizzi di memoria per andare alla successiva o alla precedente per fare lavori su array di memoria (tipo ++ sui puntatori in c)
6. Più istruzioni di Load/Store in una sola istruzione, aumentando quindi l'efficienza di trasferimento
## Le eccezioni ARM
Le eccezioni sono eventi asincroni(indipendenti da altri processi), avvengono improvvisamente quando c'è una interruzione di tipo:
- hardware
- software 
- errore
- reset
i processori ARM sono progettati per ridurre al minimo la gestione delle eccezioni
## Modalità di funzionamento
Ci sono diverse modalità in cui opera l'architettura ARM:
- USER: di solito è in questa modalità ovvero <span style="color: white; background-color: #9E0404">NON privilegiata</span>
- FIQ: entra in questa modalità quando si verifica un interrupt ad alta priorità, gestisce le interruzioni in modo più efficiente e veloce
- IRQ: entra in questa modalità quando si verifica un interrupt a bassa priorità
- Supervisor: è il supervisore e fornisce accesso alle risorse di sistema, gestisce gestioni critiche tipo software interrupt
- Undef: usato per gestire le violazioni all'accesso di memoria, un programma accede a una porzione di memoria a cui non può accedere
- System: funziona come un user solo che ha accesso ai registri con modalità privilegiata
## Priorità delle eccezioni
![[Pasted image 20240415152415.png]]
## Come sono organizzati i registri dell'architettura ARM?
- 16 registri utilizzabili vanno da R0 a R15
- un registro che serve per gli stati dei programmi CPSR(Current Program Status Register)
- 20 registri non accessibili 

## REGISTRI
Ogni registro dei 16 che possiamo usare hanno una funzione di base
- Da $R_0$ a $R_{12}$  sono per uso generale 
- $R_{13}$ (SP): è un registro che viene spesso usato per tenere l'indirizzo dello stack presente in memoria
- $R_{14}$ (LR): Link Register è un registro dove viene salvato l'indirizzo precedente all'inizio di una determinata procedura così da poterci tornare indietro una volta finita
- $R_{15}$ (PC):Program Counter, è quel registro che salva l'indirizzo di memoria dell'istruzione successiva a quella attuale
>[!info]- cosa è lo stack?
>lo stack è una struttura dati usata spesso per tenere in registro le chiamate a funzione e 
>l'allocazione dinamica

![[Pasted image 20240415162804.png]]
## Registro CPSR
Current Program Status Register
Memorizza lo stato del processore inclusi vari flag e bit di controllo
è composto da 32 bit divisi in 3 tipologie
- bit di modalità(quelle viste prima FIQ, IRQ...)
- bit di controllo
- bit di flag, contengono le varie operazioni tra flag ecc...
![[Pasted image 20240415164403.png]]
Ogni modalità ha dei registri disponibili ecco la foto:
![[Pasted image 20240415164846.png|500]]

## Pre-condizioni
Le condizioni sono quelle robe che determinano se una istruzione va eseguita o meno
La pre-condizione serve per definire se bisogna eseguire una condizione si esprime con i valori delle flag del registro CPSR(quello di prima)
>[!example]- chatgptoso esempio
>Un'istruzione con una condizione "EQ" (equal) sarà eseguita solo se il flag Zero (Z) nel CPSR è 
>impostato, indicando che il risultato dell'ultima operazione era zero. Questo permette di creare 
>codice molto efficiente che utilizza meno salti e branch.

![[Pasted image 20240415170443.png]]
## Architettura interna del processore


